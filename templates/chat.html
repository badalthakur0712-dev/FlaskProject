<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!-- ðŸ”´ REQUIRED FOR MOBILE UI -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pandav College Help Desk</title>
<style>
body{
    font-family:"Segoe UI", Arial, sans-serif;
    margin:0;
    background:#f4f7fb;
    color:#222;
}
/* ================= NAVBAR ================= */
nav{
    background:#ffffff;
    border-bottom:1px solid #e3e7ec;
    padding:14px 20px;
    position:sticky;
    top:0;
    z-index:1000;
}
.navbar{
    display:flex;
    justify-content:center;
    align-items:center;
    gap:30px;
    flex-wrap:wrap;
}
.navbar a{
    text-decoration:none;
    color:#0b2a44;
    font-weight:600;
    font-size:14px;
    position:relative;
}
.navbar a::after{
    content:"";
    position:absolute;
    left:0;
    bottom:-5px;
    width:0;
    height:2px;
    background:#0b2a44;
    transition:0.3s;
}
.navbar a:hover::after{ width:100%; }
/* ================= PAGE HEADER ================= */
.page-header{
    background: linear-gradient(rgba(11,42,68,0.8), rgba(11,42,68,0.8)),
    url('{{ url_for("static", filename="images/lucas-law-ecELcxmJTk4-unsplash.jpg") }}') center/cover no-repeat;
    color:white;
    padding:80px 20px;
    text-align:center;
}
.page-header h1{ font-size:36px; margin-bottom:10px; }
.page-header p{ font-size:16px; max-width:800px; margin:auto; line-height:1.6; }
/* ================= CHATBOX ================= */
.chat-container{
    max-width:720px;
    margin:50px auto;
    background:white;
    border-radius:12px;
    box-shadow:0 12px 30px rgba(0,0,0,0.08);
    overflow:hidden;
}
.chat-header{
    background:#0b2a44;
    color:white;
    text-align:center;
    padding:18px;
    font-size:18px;
    font-weight:600;
}
.chat-body{
    padding:18px;
    height:420px;
    overflow-y:auto;
    background:#f9f9f9;
}
.msg{
    margin-bottom:16px;
    max-width:80%;
    padding:12px 15px;
    border-radius:12px;
    font-size:14px;
    line-height:1.5;
}
.user{
    background:linear-gradient(135deg,#9df0d5,#4de1c1);
    margin-left:auto;
    text-align:right;
}
.bot{
    background:#ffffff;
    border:1px solid #ddd;
}
.typing{
    font-style:italic;
    color:#555;
}
/* ================= OPTIONS ================= */
.options{
    padding:14px;
    border-top:1px solid #ddd;
    background:#fafafa;
    text-align:center;
}
.options button{
    margin:5px;
    padding:8px 14px;
    border:none;
    border-radius:6px;
    background:#0b2a44;
    color:white;
    cursor:pointer;
    font-size:13px;
}
/* ================= CUSTOM INPUT ================= */
.custom-input{
    display:flex;
    justify-content:center;
    padding:12px;
    border-top:1px solid #ddd;
    gap:6px;
}
.custom-input input{
    flex:1;
    padding:10px;
    border-radius:6px;
    border:1px solid #ccc;
    font-size:14px;
}
.custom-input button{
    padding:10px 16px;
    border:none;
    border-radius:6px;
    background:#0b2a44;
    color:white;
    cursor:pointer;
}
/* ================= FOOTER ================= */
footer{
    background:#081f33;
    color:#dce3ea;
    text-align:center;
    padding:22px;
    font-size:13px;
}
/* ================= MOBILE UI ================= */
@media(max-width:768px){
    .page-header h1{ font-size:26px; }
    .page-header p{ font-size:14px; }
    .chat-container{ width:95%; margin:30px auto; }
    .chat-body{ height:300px; }
    .options button{ width:100%; margin:6px 0; }
}
</style>
</head>
<body>

<!-- NAVBAR -->
<nav>
    <div class="navbar">
        <a href="/">Home</a>
        <a href="/about">About</a>
        <a href="/departments">Departments</a>
        <a href="/admission">Admission</a>
        <a href="/contact">Contact</a>
        <a href="/chat">Help Desk</a>
    </div>
</nav>

<!-- PAGE HEADER -->
<div class="page-header">
    <h1>Pandav College Help Desk</h1>
    <p>Ask anything about fees, branches, timetable, admissions, or facilities. Our assistant will guide you step by step.</p>
</div>

<!-- CHATBOX -->
<div class="chat-container">
    <div class="chat-header">ðŸ’¬ Pandav College Assistant</div>

    <div class="chat-body" id="chatBody">
        <div class="msg bot">
            Hello ðŸ‘‹ Welcome! I am your Pandav College assistant. Please select a question or type your query. ðŸ˜Š
        </div>
    </div>

    <div class="options">
        {% for q in faq.keys() %}
            <button onclick="sendQuestion('{{ q }}')">{{ q }}</button>
        {% endfor %}
    </div>

    <div class="custom-input">
        <input type="text" id="userInput" placeholder="Type your question...">
        <button onclick="submitCustom()">Send</button>
    </div>
</div>

<footer>
    Â© 2026 Pandav College of Polytechnic | All Rights Reserved
</footer>

<script>
const chatBody = document.getElementById("chatBody");
const userInput = document.getElementById("userInput");

function appendMessage(text, sender="bot"){
    let msgDiv = document.createElement("div");
    msgDiv.className = "msg " + sender;
    msgDiv.innerHTML = text;  // âœ… change here to render HTML
    chatBody.appendChild(msgDiv);
    chatBody.scrollTop = chatBody.scrollHeight;
}

function botReply(text){
    let typingDiv = document.createElement("div");
    typingDiv.className = "msg bot typing";
    typingDiv.innerText = "Bot is typing...";
    chatBody.appendChild(typingDiv);
    setTimeout(()=>{
        typingDiv.remove();
        appendMessage(text,"bot");
    },1200);
}

function sendQuestion(question){
    appendMessage(question,"user");
    fetch("/get-answer",{
        method:"POST",
        headers:{"Content-Type":"application/x-www-form-urlencoded"},
        body:"question="+encodeURIComponent(question)
    })
    .then(res=>res.json())
    .then(data=>botReply(data.answer));
}

function submitCustom(){
    let q=userInput.value.trim();
    if(!q) return;
    appendMessage(q,"user");
    userInput.value="";
    fetch("/get-answer",{
        method:"POST",
        headers:{"Content-Type":"application/x-www-form-urlencoded"},
        body:"question="+encodeURIComponent(q)
    })
    .then(res=>res.json())
    .then(data=>botReply(data.answer));
}
</script>
</body>
</html>
